package logica;
import java.util.*;
public class Ladrillo extends Objeto {
	private Integer freq;
	
	/** Una nueva instancia de Ladrillo le asigna una posición aleatoria en x y le asigna la máxima altura.
	 * Además incia la frecuencia de caída en 10, esto permite modificar la dificultad al actualizar. 
	 * @param posi Posición distinta de null, que será sobreescrita por una posición aleatoria.
	 * @param etapa Matriz de ventanas de la sección actual**/
	public Ladrillo (Posicion posi, ArrayList<ArrayList<Ventana>> etapa) {
		super(posi, etapa);
		int x = (int) (Math.random()*4);
		posi = new Posicion (x, 2);
		freq = 10;
		this.posObjeto = posi;
		etapa.get(this.posObjeto.getX()).get(this.posObjeto.getY()).ponerLadrillo();
	}
	
	public Posicion getPosicion() {
		return this.posObjeto;
	}
	
	
	/** Actualiza la posición del ladrillo. avisándole a las respectivas ventanas de su movimiento. Se mueve
	 * de acuerdo a la frecuencia de la instancia y la dificultad del nivel actual.
	 * @param dificultad Dificultad o nivel actual
	 * @etapa Matriz de ventanas de la sección actual **/
	public void actualizar(int dificultad, ArrayList<ArrayList<Ventana>> etapa) {
		this.freq -= dificultad;
		if (this.freq == 0) {
			etapa.get(this.posObjeto.getX()).get(this.posObjeto.getY()).sacarLadrillo();
			this.posObjeto.moverAb();
			this.freq = 10-dificultad;
		}
		if (this.posObjeto.getY() >= 0) {
			etapa.get(this.posObjeto.getX()).get(this.posObjeto.getY()).ponerLadrillo();
		}
	}
	
	
	/** Se destruye una vez que llega al suelo. **/
	public boolean destruir() { //Cuando cae fuera del tablero se destruye.
		return this.getPosicion().getY() < 0;
	}
	
	public boolean generarTorta() {
		return false;
	}
}
