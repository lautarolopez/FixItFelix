package logica;
import java.util.*;
public class Edificio {
	private ArrayList<Seccion> arregloSecciones;
	private int seccionActual;
	
	public Edificio(int dificultad) {
		Seccion a = new SeccionSuelo(dificultad);
		Seccion b = new SeccionMedio(dificultad);
		Seccion c = new SeccionMasAlta(dificultad);
		this.arregloSecciones = new ArrayList<Seccion>();
		this.arregloSecciones.add(a);
		this.arregloSecciones.add(b);
		this.arregloSecciones.add(c);
		this.seccionActual = 0;	
	}
	
	public void reiniciarEtapa(int dificultad) {
		Seccion aux;
		switch (this.seccionActual) {
			case 0: {
				aux = new SeccionSuelo(dificultad);
				this.arregloSecciones.set(this.seccionActual, aux);
			}
			case 1: {
				aux = new SeccionMedio(dificultad);
				this.arregloSecciones.set(this.seccionActual, aux);
			}
			case 2: {
				aux = new SeccionMasAlta(dificultad);
				this.arregloSecciones.set(this.seccionActual, aux);
			}
		}
	}
	
	public boolean nivelTerminado() {
		if (this.seccionActual == 2) {  //Si estamos en la última sección, devuelve verdadero si está terminada
			return this.arregloSecciones[this.seccionActual].etapaTerminada(); 
		} else return false;
	}
	
	public boolean seccionTerminada() {
		return this.arregloSecciones[this.seccionActual].etapaTerminada();
	}
	
	public void proximaEtapa() {
		this.seccionActual++;
	}
	
	public ArrayList<ArrayList<Ventana>> getVentanas(){
		return this.arregloSecciones[this.seccionActual].getEtapa();
	}
	
	public int getSeccionActual() {
		return this.seccionActual;
	}
	
	public boolean generarPajaro() {
		if (this.seccionActual != 0) {
			return this.arregloSecciones[this.seccionActual].generarPajaro();
		} else return false;
	}
	
	public Ventana getVentana(Posicion posi) {
		return this.arregloSecciones[this.seccionActual].etapa[posi.getX()][posi.getY()];
	}
}
